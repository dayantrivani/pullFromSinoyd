!function(c,f){"use strict";var Z="ht",S=c[Z],t="position",W="absolute",o="px",p="left",j="top",M="innerHTML",V="className",G="width",P="height",N="0",H="display",A="none",n="visibility",s="user-select",m="margin",u="padding",g=null,Y=S.Color,R=S.Default,U=R.getInternal(),e=c.setTimeout,l=c.setInterval,q=c.clearTimeout,i=c.clearInterval,w=c.parseInt,J=R.isLeftButton,h=R.isDragging,K=R.startDragging,v=R.getDistance,T=R.isTouchable,$=Y.widgetIconHighlight,F=Y.widgetIconBorder,L=Y.widgetIconGradient,r=function(){return document},E=function(P,l){return P.querySelectorAll(l)},X=function(S){var j=r().createElement(S);return"ul"===S&&(k(j,t,"relative"),k(j,m,N),k(j,u,N),k(j,"list-style",A),k(j,"box-sizing","border-box"),k(j,"-moz-box-sizing","border-box"),k(j,H,"inline-block"),k(j,"vertical-align","text-bottom"),k(j,"border","1px solid "+R.contextMenuBorderColor),k(j,"box-shadow","0 0 16px 1px "+R.contextMenuShadowColor),k(j,"overflow","hidden"),R.contextMenuBorderRadius&&k(j,"border-radius",R.contextMenuBorderRadius+o)),j},B=function(d){var i=d.touches[0];return i?i:d.changedTouches[0]},z=function(){return X("div")},O=function(){return X("canvas")},k=function(x,z,r){x.style.setProperty(z,r,g)},y=function(G,_,B){R.def(S.widget[G],_,B)},I=function(e,U){e.appendChild(U)},_=function(G,s){G.removeChild(s)},x=function(p,k,Y,A){p.addEventListener(k,Y,!!A)},C=function(v,l,$,p){v.removeEventListener(l,$,!!p)};U.addMethod(R,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:F},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:$}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:F},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:$,gradient:R.imageGradient,gradientColor:L,background:$}]},contextMenuLabelFont:(T?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var D=function(n){var W=this,y=n._view;if(W.$11b=n,W.addListeners(),x(y,"contextmenu",function(X){X.preventDefault()}),!T){var K=W.$37b=W.$36b.bind(W);x(y,"mouseover",K),x(y,"mouseout",K)}};R.def(D,f,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(g){if(R.preventDefault(g),J(g)){for(var E=this,h=E.$11b,X=E.getView(),Z=X.children,U=0;U<Z.length;U++){var _=Z[U],u=_.$24b,n=_.$25b;if(u&&u.contains(g.target))return h.scrollUp(_),E.$28b=e(function(){E.$29b=l(function(){h.scrollUp(_)},100)},500),K(E,g),void 0;if(n&&n.contains(g.target))return h.scrollDown(_),E.$28b=e(function(){E.$29b=l(function(){h.scrollDown(_)},100)},500),K(E,g),void 0}T&&(g=B(g)),E.$30b={x:g.pageX,y:g.pageY}}},handle_mousedown:function(z){this.handle_touchstart(z)},handle_touchend:function(c){if(J(c)){var F=this,G=F.$30b,r=T?{x:B(c).pageX,y:B(c).pageY}:{x:c.pageX,y:c.pageY};if(!G||v(G,r)>1)return delete F.$30b,void 0;for(var b=F.getView(),j=F.$11b,O=c.target,o=g,h=g,M=j._items,e=b.$26b,_=0;_<e.length;_++)if(h=e[_],h.contains(O)){o=h.getAttribute("data-id");break}if(o&&M){var U=j.$17b(M,function(D){return D._id===o});if(U){var a=!1;U.disabled instanceof Function?a=U.disabled.call(j,U):U.disabled===!0&&(a=!0),a||(U.items?T&&F.$36b(h,!0):j.$1b(U,c))}}delete F.$30b}},$36b:function(T,X){if(!h()){var Y,w=this,H=w.$11b,c=w.getView(),S=H.$20b||c.children[0],x=H.$19b,D=c.$26b,L=c.children,m=T.target,J=c.getBoundingClientRect(),G=R.getWindowInfo(),v=G.width,Z=G.height,l=function(M){for(var x=0;x<L.length;x++){var u=L[x],D=new RegExp(M+"$"),U=u[V];if(U&&(D.test(U)||U.indexOf(M+" ")>=0))return u}},A=function(N){for(var C=0;C<D.length;C++){var h=D[C],J=new RegExp(N+"$"),k=h[V];if(k&&(J.test(k)||k.indexOf(N+" ")>=0))return h}},b=function(R){var b=A("menu-item"+R.$45b),T=b.getBoundingClientRect(),z=T.top-J.top,u=T.left-J.left;k(R,j,z+o),k(R,p,u+T.width+o);var h=R.getBoundingClientRect(),f=h.top,E=h.left,r=h.height,x=h.width,$=f+r+2,O=E+x+2;$>Z&&k(R,j,z+Z-$+o),O>v&&k(R,p,u-x+o)};if(X)Y=T;else{if("mouseover"===T.type){for(var y=0;y<D.length;y++){var t=D[y];if(t.contains(m)){Y=t;break}}if(!Y&&x){var O=x.parentNode,i=l("submenu"+x.getAttribute("data-id"));(i&&i.contains(m)||O&&O.contains(m))&&(Y=x)}}else if("mouseout"===T.type){for(var K=!1,f=T.relatedTarget,y=0;y<L.length;y++){var s=L[y];if("hidden"!==s.style.visibility&&s.contains(f)){K=!0;break}}if(K)return}!Y&&S&&(Y=A("menu-item"+(S.$45b||"NaN")))}if(Y!=x){if(x)for(var d=x;d;){if(d[V]=d[V].replace(" menu-item-hover",""),d[V].indexOf("disabled")<0){var W=H.getItemByProperty("_id",d.getAttribute("data-id"));null!=W.background?W.background instanceof Function?k(d,"background-color",W.background.call(H,W)):k(d,"background-color",W.background):k(d,"background-color",R.contextMenuBackground),k(d,"color",R.contextMenuLabelColor)}var M=l("submenu"+d.getAttribute("data-id"));M&&k(M,n,"hidden");var _=d.parentNode;d=A("menu-item"+(_.$45b||"NaN"))}if(Y){for(var B=Y,P=[];B;){B[V]+=" menu-item-hover",B[V].indexOf("disabled")<0&&(k(B,"background-color",R.contextMenuHoverBackground),k(B,"color",R.contextMenuHoverLabelColor));var g=l("submenu"+B.getAttribute("data-id"));g&&(k(g,n,"visible"),P.push(g));var _=B.parentNode;B=A("menu-item"+(_.$45b||"NaN"))}P.reverse(),P.forEach(function(r){b(r)})}}H.$19b=Y,H.$20b=Y?Y.parentNode:c.children[0]}},handle_mouseup:function(R){this.handle_touchend(R)},handleWindowTouchEnd:function(){var A=this;A.$28b!=g&&(q(A.$28b),delete A.$28b),A.$29b!=g&&(i(A.$29b),delete A.$29b),delete A.$34b,delete A.$30b,delete A.$35b},handleWindowMouseUp:function(X){this.handleWindowTouchEnd(X)},handle_mousemove:function(J){this.handle_touchmove(J)},handle_touchmove:function(X){if(!h()&&J(X)){for(var u=this,n=u.getView().children,D=g,C=0;C<n.length;C++){var w=n[C];if(w.contains(X.target)){D=w;break}}var M=u.$30b,d=T?{x:B(X).pageX,y:B(X).pageY}:{x:X.pageX,y:X.pageY};D&&M&&v(M,d)>2&&(K(u,X),u.$34b=D,u.$35b=D.$18b)}},handleWindowTouchMove:function(p){p.preventDefault();var i=this,$=i.$11b,f=i.$34b,k=i.$35b,Q=i.$30b;if(Q&&f){var U=T?{x:B(p).pageX,y:B(p).pageY}:{x:p.pageX,y:p.pageY},z=U.y-Q.y;z>0?$.scrollUp(f,f.$18b-(k-z)):$.scrollDown(f,k-z-f.$18b)}},handleWindowMouseMove:function(p){this.handleWindowTouchMove(p)},$10b:function(D,d){D.preventDefault();for(var u=this,p=u.getView().children,S=g,A=0;A<p.length;A++){var s=p[A];if(s.contains(D.target)){S=s;break}}if(S){var J=this.$11b,O=J.getRowHeight();Math.abs(d)>.05&&(d>0?J.scrollUp(S,d*O):0>d&&J.scrollDown(S,-d*O))}},handle_mousewheel:function(C){this.$10b(C,C.wheelDelta/40)},handle_DOMMouseScroll:function(m){this.$10b(m,-m.detail)},$44b:function(S){this.getView().contains(S.target)||this.$11b.hide()},$41b:function(b){this.$11b.show(b)},$4b:function(x,O){var e=this.$11b;if(O=O||e._items,O&&O.length&&x.keyCode){var M=[x.keyCode];x.shiftKey&&M.push(16),x.ctrlKey&&M.push(17),x.altKey&&M.push(18),/mac/.test(c.navigator?c.navigator.userAgent.toLowerCase():"")?x.metaKey&&M.push(17):x.metaKey&&M.push(91),M.sort();var s=M.join(),u=e.$17b(O,function(E){if(E.key){var t=E.key.slice(0);return t.sort(),s===t.join()}});if(u){u.preventDefault!==!1&&x.preventDefault();var m=!1;u.disabled instanceof Function?m=u.disabled.call(e,u):u.disabled===!0&&(m=!0),m||e.$1b(u,x)}}},$39b:function(F){var s=this,G=B(F);s.$32b={x:G.pageX,y:G.pageY}},$38b:function(V){var T=this,L=B(V);T.$31b={x:L.pageX,y:L.pageY},T.$33b=e(function(){T.$31b&&(T.$32b?v(T.$31b,T.$32b)<10&&T.$11b.show(V):T.$11b.show(V)),delete T.$33b,delete T.$31b,delete T.$32b},600)},$40b:function(){var m=this;m.$33b!=g&&(q(m.$33b),delete m.$33b,delete m.$31b,delete m.$32b)}}),S.widget.ContextMenu=function(i){var d=this,j=d._view=U.createView(null,d);j[V]="ht-widget-contextmenu",d.setItems(i),d.$13b=new D(d),k(j,"font",R.contextMenuLabelFont),k(j,t,W),k(j,"cursor","default"),k(j,"-webkit-"+s,A),k(j,"-moz-"+s,A),k(j,"-ms-"+s,A),k(j,s,A),k(j,"box-sizing","border-box"),k(j,"-moz-box-sizing","border-box"),R.baseZIndex!=g&&k(j,"z-index",w(R.baseZIndex)+2+""),d.$3b=function(K){d.$13b.$4b(K)}},y("ContextMenu",f,{$5b:0,_items:g,$21b:g,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var O=this,d=O._enableGlobalKey;d===!1&&(x(r(),"keydown",O.$3b),O._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,C(r(),"keydown",this.$3b)},setItems:function(G){this._items=G},getItems:function(){return this._items},setVisibleFunc:function(I){this.$16b=I},setLabelMaxWidth:function(m){this.$43b=m},$1b:function(v,r){var Q=this;if("check"===v.type)v.selected=!v.selected;else if("radio"===v.type){var m=v.groupId;Q.$17b(Q._items,function(r){r.groupId===m&&(r.selected=!1)}),v.selected=!0}if(Q.hide(),v.action)v.action.apply(v.scope||Q,[v,r]);else if(v.href){var n=v.linkTarget||"_self";c.open(v.href,n)}},getItemById:function(c){return this.getItemByProperty("id",c)},setItemVisible:function(V,W){var g=this.getItemById(V);g&&(g.visible=W)},getItemByProperty:function(U,s,i){var v=this;if(i=i||v._items,!i||0===i.length)return g;var T=v.$17b(i,function(I){return I[U]===s});return T||g},scrollUp:function(o,c){var I=this;if(c=c==g?20:c,c=w(c),0!==c){var M=0;o.$18b>c&&(M=o.$18b-c),I.$42b(o,M),o.scrollTop=M,o.$18b=M}},scrollDown:function(Y,b){var Z=this;if(b=b==g?20:b,b=w(b),0!==b){var U=Y.$22b,e=Y.$23b,I=U-e;e+Y.$18b+b<U&&(I=Y.$18b+b),Z.$42b(Y,I),Y.scrollTop=I,Y.$18b=I}},$42b:function(z,f){f=f==g?z.$18b:f;var Z=z.$24b,t=z.$25b;Z&&(k(Z,"top",f+o),0==f?k(Z,H,A):k(Z,H,"block")),t&&(k(t,"bottom",-f+o),f==z.$22b-z.$23b?k(t,H,A):k(t,H,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(p,s){for(var F=0;F<p.length;F++){var G=p[F];if(s(G))return G;if(G.items){var R=this.$17b(G.items,s);if(R)return R}}},$2b:function(C,Y){for(var Q=this,q=0;q<C.length;q++){Q.$5b++;var B=C[q];if(B.visible!==!1&&!(R.isFunction(B.visible)&&B.visible()===!1||Q.$16b&&!Q.$16b.call(Q,B))){var r=X("li"),v=Q.$5b+"";if(k(r,"white-space","nowrap"),k(r,H,"block"),"separator"===B||B.separator===!0){var J=z();J[V]="separator",k(J,P,R.contextMenuSeparatorWidth+o),k(J,"background",R.contextMenuSeparatorColor),I(r,J)}else{B._id=v,r.setAttribute("data-id",v);var K=X("span"),w=X("span"),N=O(),A=z();if(k(K,H,"inline-block"),k(K,P,"1.2em"),k(w,H,"inline-block"),k(w,P,"1.2em"),k(w,"line-height","1.2em"),N[V]="prefix",k(N,H,"inline-block"),k(N,G,"1em"),k(N,P,"1em"),k(N,"vertical-align","middle"),k(N,m,"0 0.2em"),"check"===B.type&&B.selected?N[V]+=" check-prefix":"radio"===B.type&&B.selected&&(N[V]+=" radio-prefix"),I(r,N),B.icon){var c=O();c[V]="contextmenu-item-icon",k(c,H,"inline-block"),k(c,P,"1.2em"),k(c,G,"1.2em"),k(c,"margin-right","0.2em"),k(c,"float","left"),c.$50b=B.icon,c._item=B,I(K,c)}if(w[M]=B.label,I(K,w),I(r,K),A[V]="suffix",k(A,H,"inline-block"),k(A,"margin-left","1em"),k(A,"margin-right","0.4em"),k(A,"text-align","right"),k(A,"font-size","75%"),B.items&&(A[M]=R.contextMenuSubmenuMark),B.suffix&&(A[M]=B.suffix),I(r,A),r[V]="menu-item menu-item"+v,null!=B.background?B.background instanceof Function?k(r,"background-color",B.background.call(Q,B)):k(r,"background-color",B.background):k(r,"background-color",R.contextMenuBackground),k(r,"color",R.contextMenuLabelColor),k(r,u,"3px 0"),B.disabled instanceof Function){var j=B.disabled.call(Q,B);j&&(r[V]+=" disabled",k(r,"color",R.contextMenuDisabledLabelColor))}else B.disabled&&(r[V]+=" disabled",k(r,"color",R.contextMenuDisabledLabelColor));if(B.items){Q.$21b||(Q.$21b=new S.List);var s=X("ul");s[V]="submenu"+v,s.$45b=v,k(s,n,"hidden"),k(s,t,W),I(Q._view,s),Q.$21b.add(s),Q.$2b(B.items,s)}}I(Y,r)}}},rebuild:function(){var v=this,U=v._items,E=v._view;if(E&&(E[M]="",v.$21b=g,v.$5b=0,v.$19b=g,v.$20b=g,E.$26b=g,U&&0!==U.length)){var P=X("ul",v._r);I(E,P),v.$2b(U,P)}},addTo:function(y){if(y){var O=this,H=O.$13b;if(O.$12b=y,O.$9b=function(l){H.$44b(l)},O.$27b=function(z){H.$41b(z)},T){var V=O.$6b=function(d){H.$38b(d)},h=O.$7b=function(w){H.$39b(w)},F=O.$8b=function(L){H.$40b(L)};x(y,"touchstart",V,!0),x(y,"touchmove",h),x(y,"touchend",F)}else x(y,"contextmenu",O.$27b)}},showOnView:function(n,$,S){n=n.getView?n.getView():n;var v=R.getWindowInfo(),D=n.getBoundingClientRect();this.show(D.left+v.left+$,D.top+v.top+S)},show:function(_,Y,f){var A=this,f=f==g?!0:!1,q=A._view;if(q){if(A.invalidate(),1===arguments.length){var i=_;if(T){var v=B(i);_=v.pageX,Y=v.pageY}else _=i.pageX,Y=i.pageY}var L=R.getWindowInfo(),U=L.width,w=L.height,u=L.left,F=L.top,d={pageX:_,pageY:Y,clientX:_-u,clientY:Y-F,target:1,originEvent:i},s=d.clientX,J=d.clientY,D=function(i){i.style.height=w-6+o;var E=z(),a=z(),l=function(f){k(f,t,W),k(f,"text-align","center"),k(f,G,"100%"),k(f,"font-size",10+o),k(f,"padding","2px 0"),k(f,"border","0px solid "+R.contextMenuScrollerBorderColor),k(f,"background-color",R.contextMenuScrollerColor1),f.style.backgroundImage="-webkit-linear-gradient(top, "+R.contextMenuScrollerColor1+", "+R.contextMenuScrollerColor2+")",f.style.backgroundImage="linear-gradient(to bottom, "+R.contextMenuScrollerColor1+", "+R.contextMenuScrollerColor2+")"};E[V]="menu-arrow-item menu-arrow-item-top",a[V]="menu-arrow-item menu-arrow-item-bottom",l(E),k(E,"top",N),k(E,"left",N),k(E,"border-bottom-width",1+o),E[M]="▲",l(a),k(a,"bottom",N),k(a,"left",N),k(a,"border-top-width",1+o),a[M]="▼",i.$24b=E,i.$25b=a,i.$18b=i.scrollTop,i.$22b=i.scrollHeight,i.$23b=i.clientHeight,I(i,E),I(i,a),A.$42b(i)};A.beforeShow&&A.beforeShow(d);var P=A._items;if(P&&(i&&i.preventDefault(),P.length)){A.rebuild(),R.appendToScreen(q),q.$26b=E(q,".menu-item");var C=q.children[0];C.offsetHeight>w&&D(C);var y=J+(f?1:0),S=s+(f?1:0),X=function(h){for(var Y=0,b=0,R=0,Z=A.$43b;R<h.children.length;R++){var O=h.children[R];if(O.getAttribute("data-id")){var s=O.children[1],n=O.children[2],p=s.children;if(Z){var N=p[0];p.length>1&&(N=p[1]),N.offsetWidth>Z&&(N[M]="<marquee scrollamount='3'>"+N[M]+"</marquee>",N.children[0].style.verticalAlign="text-bottom",k(N,G,Z+o),k(N,H,"inline-block"))}var u=s.offsetWidth,L=n.offsetWidth;u>Y&&(Y=u),L>b&&(b=L)}}for(R=0;R<h.children.length;R++){var O=h.children[R];if(O.getAttribute("data-id")){var s=O.children[1],n=O.children[2],X=s.children[0],$=s.children[1];!$&&X.style.width&&k(X,G,Y+o),k(s,G,Y+o),k(n,G,b+o)}}};X(C);var h=J+3+q.offsetHeight,K=s+3+q.offsetWidth;h>w?k(q,j,y-(h-w)+F+o):k(q,j,y+F+o),K>U?k(q,p,S-(K-U)+u+o):k(q,p,S+u+o);var Q=A.$21b;Q&&Q.each(function(O){X(O),O.offsetHeight>w&&D(O)}),A.$9b&&x(r(),T?"touchstart":"mousedown",A.$9b,!0),A.afterShow&&A.afterShow(d),A.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=g:!1},getRelatedView:function(){return this.$12b},hide:function(){var e=this,B=e._view;B&&B.parentNode&&(_(B.parentNode,B),C(r(),T?"touchstart":"mousedown",e.$9b,!0),e.afterHide&&e.afterHide())},dispose:function(){var u=this,o=u.$12b,Z=u._view;Z&&(Z.parentNode&&_(Z.parentNode,Z),u.disableGlobalKey(),o&&(T?(C(o,"touchstart",u.$6b,!0),C(o,"touchmove",u.$7b),C(o,"touchend",u.$8b)):C(o,"contextmenu",u.$27b)),u._view=u._items=u.$21b=u.$19b=u.$12b=u.beforeShow=u.afterShow=u.afterHide=u.$9b=u.$3b=u.$6b=u.$7b=u.$8b=u.$27b=g)},$46b:function(D,c,K,Z,i){var y=U.initContext(D);U.translateAndScale(y,0,0,1),y.clearRect(0,0,K,Z),R.drawStretchImage(y,R.getImage(c),"fill",0,0,K,Z,i,this),y.restore()},$47b:function(){var I,Z,H,d=this,n=d._view;if(d.isShowing()){var r=E(n,".check-prefix");for(H=0;H<r.length;H++){var S=r[H];I=S.clientWidth,Z=S.clientHeight,S.$48b=I,S.$49b=Z,U.setCanvas(S,I,Z)}var s=E(n,".radio-prefix");for(H=0;H<s.length;H++){var h=s[H];I=h.clientWidth,Z=h.clientHeight,h.$48b=I,h.$49b=Z,U.setCanvas(h,I,Z)}var B=E(n,".contextmenu-item-icon");for(H=0;H<B.length;H++){var w=B[H];I=w.clientWidth,Z=w.clientHeight,w.$48b=I,w.$49b=Z,U.setCanvas(w,I,Z)}}},validateImpl:function(){var P,B,k,I=this,d=I._view;if(I.isShowing()){var A=E(d,".check-prefix");for(k=0;k<A.length;k++){var N=A[k];P=N.$48b,B=N.$49b,P&&B&&I.$46b(N,R.contextMenuCheckIcon,P,B)}var p=E(d,".radio-prefix");for(k=0;k<p.length;k++){var n=p[k];P=n.$48b,B=n.$49b,P&&B&&I.$46b(n,R.contextMenuRadioIcon,P,B)}var H=E(d,".contextmenu-item-icon");for(k=0;k<H.length;k++){var g=H[k];P=g.$48b,B=g.$49b,P&&B&&I.$46b(g,R.getImage(g.$50b),P,B,g._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);